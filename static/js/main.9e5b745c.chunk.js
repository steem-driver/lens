(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,a){e.exports=a(92)},58:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),l=(a(58),a(26)),i=a(13),s=a(98),u=a(99),m=a(95),d=a(96),p=a(97),h=a(17),y=a(18),v=a(23),f=a(19),g=a(24),b=a(20),k=a.n(b),E=a(22),w=(a(42),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(f.a)(t).call(this,e))).state={columns:[],data:[],pages:-1,loading:!0},a}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{columns:this.columns(),data:this.state.data,pageSize:20,loading:this.state.loading,onFetchData:function(t,a){0===t.data.length&&(e.setState({loading:!0}),e.fetchData())}})}},{key:"columns",value:function(){var e=this.props,t=e.token,a=e.table,n=[{Header:"Account",accessor:"account"},{Header:"Price (Steem)",accessor:"price"},{Header:"".concat(t," Amount"),accessor:"quantity"},{Header:"Steem Amount",accessor:"volume"},{Header:"Date",accessor:"timestamp"}],r=[{Header:"Type",accessor:"type"},{Header:"Price (Steem)",accessor:"price"},{Header:"".concat(t," Amount"),accessor:"quantity"},{Header:"Steem Amount",accessor:"volume"},{Header:"Date",accessor:"timestamp"}];return"tradesHistory"===a?r:n}},{key:"fetchData",value:function(){var e=this,t=this.props,a=t.token,n=t.table,r=t.index,o=t.descending;k.a.post("https://api.steem-engine.com/rpc/contracts",{jsonrpc:"2.0",id:18,method:"find",params:{contract:"market",table:n,query:{symbol:a},limit:500,offset:0,indexes:[{index:r,descending:o}]}}).then(function(t){if(t&&t.data&&t.data.result){var a=t.data.result.map(function(e){return e.volume||(e.volume=Number(e.price*e.quantity)),e.volume=Number(e.volume).toFixed(3),e.quantity=Number(e.quantity).toFixed(3),e.timestamp&&(e.timestamp=new Date(1e3*e.timestamp).toLocaleString()),e});e.setState({data:a,loading:!1})}})}}]),t}(r.a.Component)),S=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(f.a)(t).call(this,e))).state={columns:[],data:[],pages:-1,loading:!0},a}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{columns:this.columns(),data:this.state.data,pageSize:20,loading:this.state.loading,onFetchData:function(t,a){0===t.data.length&&(e.setState({loading:!0}),e.fetchData(t,a))}})}},{key:"columns",value:function(){var e=this.props.token;return[{Header:"Type",accessor:"type"},{Header:"Buyer",accessor:"buyer"},{Header:"Seller",accessor:"seller"},{Header:"Price (Steem)",accessor:"price"},{Header:"".concat(e," Amount"),accessor:"quantity"},{Header:"Steem Amount",accessor:"volume"},{Header:"Date",accessor:"timestamp"}]}},{key:"fetchData",value:function(e,t){var a=this,n=this.props.token,r="https://steem-engine.rocks/transactions.json?symbol=".concat(n,"&contract=").concat("market","&per_page=").concat(1e3,"&page=").concat(1);k.a.get("".concat("https://cors-anywhere.herokuapp.com/").concat(r)).then(function(e){if(e&&e.data&&e.data.transactions){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=e.data.transactions[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var i=c.value,s=a.buildRows(i);null!=s&&(s.length>0?t=t.concat(s):t.push(s))}}catch(u){r=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}a.setState({data:t,loading:!1})}})}},{key:"buildRows",value:function(e){var t=this.props.token;if(e.payload.symbol!==t)return null;if("buy"!==e.action&&"sell"!==e.action)return null;var a=e.logs.events.filter(function(e){return"transferFromContract"===e.event});if(a&&0!==a.length){for(var n=[],r=0;r+1<a.length;r+=2){var o=e.sender,c=this.getTradeInfo(o,t,[a[r],a[r+1]]),l=c.receiver,i=c.quantity,s=c.volume,u={type:e.action,timestamp:new Date(e.timestamp).toLocaleString(),price:Number(s/i).toFixed(8),quantity:Number(i).toFixed(3),volume:Number(s).toFixed(3)};"buy"===u.type?(u.buyer=o,u.seller=l):"sell"===u.type&&(u.seller=o,u.buyer=l),n.push(u)}return n}return null}},{key:"getTradeInfo",value:function(e,t,a){var n=null,r=null,o=null,c=!0,l=!1,i=void 0;try{for(var s,u=a[Symbol.iterator]();!(c=(s=u.next()).done);c=!0){var m=s.value.data;m.to!==e&&(n=m.to),m.symbol===t?r=m.quantity:"STEEMP"===m.symbol&&(o=m.quantity)}}catch(d){l=!0,i=d}finally{try{c||null==u.return||u.return()}finally{if(l)throw i}}return{receiver:n,quantity:r,volume:o}}}]),t}(r.a.Component),H=function(e){var t=e.location,a=new URLSearchParams(t.search).get("token");return r.a.createElement("div",null,r.a.createElement(s.a,{bg:"dark",variant:"dark"},r.a.createElement(s.a.Brand,null,r.a.createElement("img",{alt:"",src:"/favicon.ico",width:"30",height:"30",className:"d-inline-block align-top"})," Lens"),r.a.createElement(u.a,{className:"mr-auto"},r.a.createElement(l.b,{className:"nav-link",to:"/open_order?token=".concat(a)},"Open Orders"),r.a.createElement(l.b,{className:"nav-link",to:"/trade_history?token=".concat(a)},"Trade History"))),r.a.createElement("br",null))},x=function(e){var t=e.location,a=new URLSearchParams(t.search).get("token");return r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement("h3",null,"People Buying ",a),r.a.createElement(w,{token:a,table:"buyBook",index:"price",descending:!0})),r.a.createElement(p.a,null,r.a.createElement("h3",null,"People Selling ",a),r.a.createElement(w,{token:a,table:"sellBook",index:"price",descending:!1}))))},j=function(e){var t=e.location,a=new URLSearchParams(t.search).get("token");return r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement("h3",null,a," Trade History"),r.a.createElement(w,{token:a,table:"tradesHistory",index:"timestamp",descending:!1})),r.a.createElement(p.a,null,r.a.createElement("h3",null,a," Trade History with Buyers and Sellers"),r.a.createElement(S,{token:a,index:"timestamp",descending:!1}))))};var q=function(){return r.a.createElement(l.a,null,r.a.createElement(i.a,{component:H}),r.a.createElement(i.a,{path:"/",exact:!0,component:x}),r.a.createElement(i.a,{path:"/open_order",component:x}),r.a.createElement(i.a,{path:"/trade_history",component:j}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[53,1,2]]]);
//# sourceMappingURL=main.9e5b745c.chunk.js.map